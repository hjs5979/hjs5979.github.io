---
layout: single
title:  분산분석
categories: 분산분석과 다중비교
tag: [Statistic, Test]
use_math: true
toc: true
author_profile: true
sidebar:
  nav: docs
---

일원배치분산분석은 여러 개 집단의 평균이 모두 같다는 귀무가설을 세우고 분산비(F값)를 검정통계량으로 하여 F분포로 검정하는 방법입니다. 각 집단의 데이터는 등분산을 가정합니다.

더 자세히 설명하면, k는 집단 개수, n은 표본 전체 크기, 그룹간 편차$S_{B}$, 그룹내 편차$S_{W}$라 가정하면

$F = \frac{\frac{S_{B}}{k-1}}{\frac{S_{W}}{n-k}}$는 F(k-1,n-k)를 따릅니다.

ex)
한 유저 A가 유명 레이싱 게임에서 이제까지의 자신의 레이싱 데이터를 분석하려고 합니다. 이 레이싱 게임에서 유저는 레이싱을 할 때마다 자동차를 하나씩 선택하고, 게임은 도착점에 도달했을 때 자동으로 도착까지 걸린 시간에 대한 기록을 남긴다. 이 때, 자동차에 따라 기록의 평균에 차이가 생기는 지 검정하시오.

```python
from statsmodels.formula.api import ols
from statsmodels.stats.anova import anova_lm

model = ols('기록 ~ C(자동차)', df).fit()
anova_lm(model)
```

|-|df|sum_sq|mean_sq|F|PR(&gt;F\)|
|---|---|---|---|---|---|
|C(자동차)|2.0|2138.98|1069.49|0.30|0.74|
|Residual|45.0|159047.42|3534.38|NaN|NaN|

p값이 0.05 이상이므로 귀무가설 수용합니다. 집단간 평균에 차이는 없다.





|-|df|sum_sq|mean_sq|F|PR(>F)|
|-|-|-|-|-|-|
|C(아이템)|2.0|239.446250|119.723125|0.030469|0.970013|
|C(자동차)|2.0|2959.950|248|1479.975124|0.376652|0.688624|
|C(아이템):C(자동차)|4.0|4744.513828|1186.128457|0.301868|0.874929|
|Residual|39.0|153242.502175|3929.294928|NaN|NaN|
